{"version":3,"file":"validate.js","sources":["uni_modules/uni-forms/components/uni-forms/validate.js"],"sourcesContent":["var pattern = {\n\temail: /^\\S+?@\\S+?\\.\\S+?$/,\n\tidcard: /^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/,\n\turl: new RegExp(\n\t\t\"^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$\",\n\t\t'i')\n};\n\nconst FORMAT_MAPPING = {\n\t\"int\": 'integer',\n\t\"bool\": 'boolean',\n\t\"double\": 'number',\n\t\"long\": 'number',\n\t\"password\": 'string'\n\t// \"fileurls\": 'array'\n}\n\nfunction formatMessage(args, resources = '') {\n\tvar defaultMessage = ['label']\n\tdefaultMessage.forEach((item) => {\n\t\tif (args[item] === undefined) {\n\t\t\targs[item] = ''\n\t\t}\n\t})\n\n\tlet str = resources\n\tfor (let key in args) {\n\t\tlet reg = new RegExp('{' + key + '}')\n\t\tstr = str.replace(reg, args[key])\n\t}\n\treturn str\n}\n\nfunction isEmptyValue(value, type) {\n\tif (value === undefined || value === null) {\n\t\treturn true;\n\t}\n\n\tif (typeof value === 'string' && !value) {\n\t\treturn true;\n\t}\n\n\tif (Array.isArray(value) && !value.length) {\n\t\treturn true;\n\t}\n\n\tif (type === 'object' && !Object.keys(value).length) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nconst types = {\n\tinteger(value) {\n\t\treturn types.number(value) && parseInt(value, 10) === value;\n\t},\n\tstring(value) {\n\t\treturn typeof value === 'string';\n\t},\n\tnumber(value) {\n\t\tif (isNaN(value)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn typeof value === 'number';\n\t},\n\t\"boolean\": function(value) {\n\t\treturn typeof value === 'boolean';\n\t},\n\t\"float\": function(value) {\n\t\treturn types.number(value) && !types.integer(value);\n\t},\n\tarray(value) {\n\t\treturn Array.isArray(value);\n\t},\n\tobject(value) {\n\t\treturn typeof value === 'object' && !types.array(value);\n\t},\n\tdate(value) {\n\t\treturn value instanceof Date;\n\t},\n\ttimestamp(value) {\n\t\tif (!this.integer(value) || Math.abs(value).toString().length > 16) {\n\t\t\treturn false\n\t\t}\n\t\treturn true;\n\t},\n\tfile(value) {\n\t\treturn typeof value.url === 'string';\n\t},\n\temail(value) {\n\t\treturn typeof value === 'string' && !!value.match(pattern.email) && value.length < 255;\n\t},\n\turl(value) {\n\t\treturn typeof value === 'string' && !!value.match(pattern.url);\n\t},\n\tpattern(reg, value) {\n\t\ttry {\n\t\t\treturn new RegExp(reg).test(value);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t},\n\tmethod(value) {\n\t\treturn typeof value === 'function';\n\t},\n\tidcard(value) {\n\t\treturn typeof value === 'string' && !!value.match(pattern.idcard);\n\t},\n\t'url-https'(value) {\n\t\treturn this.url(value) && value.startsWith('https://');\n\t},\n\t'url-scheme'(value) {\n\t\treturn value.startsWith('://');\n\t},\n\t'url-web'(value) {\n\t\treturn false;\n\t}\n}\n\nclass RuleValidator {\n\n\tconstructor(message) {\n\t\tthis._message = message\n\t}\n\n\tasync validateRule(fieldKey, fieldValue, value, data, allData) {\n\t\tvar result = null\n\n\t\tlet rules = fieldValue.rules\n\n\t\tlet hasRequired = rules.findIndex((item) => {\n\t\t\treturn item.required\n\t\t})\n\t\tif (hasRequired < 0) {\n\t\t\tif (value === null || value === undefined) {\n\t\t\t\treturn result\n\t\t\t}\n\t\t\tif (typeof value === 'string' && !value.length) {\n\t\t\t\treturn result\n\t\t\t}\n\t\t}\n\n\t\tvar message = this._message\n\n\t\tif (rules === undefined) {\n\t\t\treturn message['default']\n\t\t}\n\n\t\tfor (var i = 0; i < rules.length; i++) {\n\t\t\tlet rule = rules[i]\n\t\t\tlet vt = this._getValidateType(rule)\n\n\t\t\tObject.assign(rule, {\n\t\t\t\tlabel: fieldValue.label || `[\"${fieldKey}\"]`\n\t\t\t})\n\n\t\t\tif (RuleValidatorHelper[vt]) {\n\t\t\t\tresult = RuleValidatorHelper[vt](rule, value, message)\n\t\t\t\tif (result != null) {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (rule.validateExpr) {\n\t\t\t\tlet now = Date.now()\n\t\t\t\tlet resultExpr = rule.validateExpr(value, allData, now)\n\t\t\t\tif (resultExpr === false) {\n\t\t\t\t\tresult = this._getMessage(rule, rule.errorMessage || this._message['default'])\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (rule.validateFunction) {\n\t\t\t\tresult = await this.validateFunction(rule, value, data, allData, vt)\n\t\t\t\tif (result !== null) {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (result !== null) {\n\t\t\tresult = message.TAG + result\n\t\t}\n\n\t\treturn result\n\t}\n\n\tasync validateFunction(rule, value, data, allData, vt) {\n\t\tlet result = null\n\t\ttry {\n\t\t\tlet callbackMessage = null\n\t\t\tconst res = await rule.validateFunction(rule, value, allData || data, (message) => {\n\t\t\t\tcallbackMessage = message\n\t\t\t})\n\t\t\tif (callbackMessage || (typeof res === 'string' && res) || res === false) {\n\t\t\t\tresult = this._getMessage(rule, callbackMessage || res, vt)\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tresult = this._getMessage(rule, e.message, vt)\n\t\t}\n\t\treturn result\n\t}\n\n\t_getMessage(rule, message, vt) {\n\t\treturn formatMessage(rule, message || rule.errorMessage || this._message[vt] || message['default'])\n\t}\n\n\t_getValidateType(rule) {\n\t\tvar result = ''\n\t\tif (rule.required) {\n\t\t\tresult = 'required'\n\t\t} else if (rule.format) {\n\t\t\tresult = 'format'\n\t\t} else if (rule.arrayType) {\n\t\t\tresult = 'arrayTypeFormat'\n\t\t} else if (rule.range) {\n\t\t\tresult = 'range'\n\t\t} else if (rule.maximum !== undefined || rule.minimum !== undefined) {\n\t\t\tresult = 'rangeNumber'\n\t\t} else if (rule.maxLength !== undefined || rule.minLength !== undefined) {\n\t\t\tresult = 'rangeLength'\n\t\t} else if (rule.pattern) {\n\t\t\tresult = 'pattern'\n\t\t} else if (rule.validateFunction) {\n\t\t\tresult = 'validateFunction'\n\t\t}\n\t\treturn result\n\t}\n}\n\nconst RuleValidatorHelper = {\n\trequired(rule, value, message) {\n\t\tif (rule.required && isEmptyValue(value, rule.format || typeof value)) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.required);\n\t\t}\n\n\t\treturn null\n\t},\n\n\trange(rule, value, message) {\n\t\tconst {\n\t\t\trange,\n\t\t\terrorMessage\n\t\t} = rule;\n\n\t\tlet list = new Array(range.length);\n\t\tfor (let i = 0; i < range.length; i++) {\n\t\t\tconst item = range[i];\n\t\t\tif (types.object(item) && item.value !== undefined) {\n\t\t\t\tlist[i] = item.value;\n\t\t\t} else {\n\t\t\t\tlist[i] = item;\n\t\t\t}\n\t\t}\n\n\t\tlet result = false\n\t\tif (Array.isArray(value)) {\n\t\t\tresult = (new Set(value.concat(list)).size === list.length);\n\t\t} else {\n\t\t\tif (list.indexOf(value) > -1) {\n\t\t\t\tresult = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!result) {\n\t\t\treturn formatMessage(rule, errorMessage || message['enum']);\n\t\t}\n\n\t\treturn null\n\t},\n\n\trangeNumber(rule, value, message) {\n\t\tif (!types.number(value)) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.pattern.mismatch);\n\t\t}\n\n\t\tlet {\n\t\t\tminimum,\n\t\t\tmaximum,\n\t\t\texclusiveMinimum,\n\t\t\texclusiveMaximum\n\t\t} = rule;\n\t\tlet min = exclusiveMinimum ? value <= minimum : value < minimum;\n\t\tlet max = exclusiveMaximum ? value >= maximum : value > maximum;\n\n\t\tif (minimum !== undefined && min) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['number'][exclusiveMinimum ?\n\t\t\t\t'exclusiveMinimum' : 'minimum'\n\t\t\t])\n\t\t} else if (maximum !== undefined && max) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['number'][exclusiveMaximum ?\n\t\t\t\t'exclusiveMaximum' : 'maximum'\n\t\t\t])\n\t\t} else if (minimum !== undefined && maximum !== undefined && (min || max)) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['number'].range)\n\t\t}\n\n\t\treturn null\n\t},\n\n\trangeLength(rule, value, message) {\n\t\tif (!types.string(value) && !types.array(value)) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.pattern.mismatch);\n\t\t}\n\n\t\tlet min = rule.minLength;\n\t\tlet max = rule.maxLength;\n\t\tlet val = value.length;\n\n\t\tif (min !== undefined && val < min) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['length'].minLength)\n\t\t} else if (max !== undefined && val > max) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['length'].maxLength)\n\t\t} else if (min !== undefined && max !== undefined && (val < min || val > max)) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message['length'].range)\n\t\t}\n\n\t\treturn null\n\t},\n\n\tpattern(rule, value, message) {\n\t\tif (!types['pattern'](rule.pattern, value)) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.pattern.mismatch);\n\t\t}\n\n\t\treturn null\n\t},\n\n\tformat(rule, value, message) {\n\t\tvar customTypes = Object.keys(types);\n\t\tvar format = FORMAT_MAPPING[rule.format] ? FORMAT_MAPPING[rule.format] : (rule.format || rule.arrayType);\n\n\t\tif (customTypes.indexOf(format) > -1) {\n\t\t\tif (!types[format](value)) {\n\t\t\t\treturn formatMessage(rule, rule.errorMessage || message.typeError);\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t},\n\n\tarrayTypeFormat(rule, value, message) {\n\t\tif (!Array.isArray(value)) {\n\t\t\treturn formatMessage(rule, rule.errorMessage || message.typeError);\n\t\t}\n\n\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\tconst element = value[i];\n\t\t\tlet formatResult = this.format(rule, element, message)\n\t\t\tif (formatResult !== null) {\n\t\t\t\treturn formatResult\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t}\n}\n\nclass SchemaValidator extends RuleValidator {\n\n\tconstructor(schema, options) {\n\t\tsuper(SchemaValidator.message);\n\n\t\tthis._schema = schema\n\t\tthis._options = options || null\n\t}\n\n\tupdateSchema(schema) {\n\t\tthis._schema = schema\n\t}\n\n\tasync validate(data, allData) {\n\t\tlet result = this._checkFieldInSchema(data)\n\t\tif (!result) {\n\t\t\tresult = await this.invokeValidate(data, false, allData)\n\t\t}\n\t\treturn result.length ? result[0] : null\n\t}\n\n\tasync validateAll(data, allData) {\n\t\tlet result = this._checkFieldInSchema(data)\n\t\tif (!result) {\n\t\t\tresult = await this.invokeValidate(data, true, allData)\n\t\t}\n\t\treturn result\n\t}\n\n\tasync validateUpdate(data, allData) {\n\t\tlet result = this._checkFieldInSchema(data)\n\t\tif (!result) {\n\t\t\tresult = await this.invokeValidateUpdate(data, false, allData)\n\t\t}\n\t\treturn result.length ? result[0] : null\n\t}\n\n\tasync invokeValidate(data, all, allData) {\n\t\tlet result = []\n\t\tlet schema = this._schema\n\t\tfor (let key in schema) {\n\t\t\tlet value = schema[key]\n\t\t\tlet errorMessage = await this.validateRule(key, value, data[key], data, allData)\n\t\t\tif (errorMessage != null) {\n\t\t\t\tresult.push({\n\t\t\t\t\tkey,\n\t\t\t\t\terrorMessage\n\t\t\t\t})\n\t\t\t\tif (!all) break\n\t\t\t}\n\t\t}\n\t\treturn result\n\t}\n\n\tasync invokeValidateUpdate(data, all, allData) {\n\t\tlet result = []\n\t\tfor (let key in data) {\n\t\t\tlet errorMessage = await this.validateRule(key, this._schema[key], data[key], data, allData)\n\t\t\tif (errorMessage != null) {\n\t\t\t\tresult.push({\n\t\t\t\t\tkey,\n\t\t\t\t\terrorMessage\n\t\t\t\t})\n\t\t\t\tif (!all) break\n\t\t\t}\n\t\t}\n\t\treturn result\n\t}\n\n\t_checkFieldInSchema(data) {\n\t\tvar keys = Object.keys(data)\n\t\tvar keys2 = Object.keys(this._schema)\n\t\tif (new Set(keys.concat(keys2)).size === keys2.length) {\n\t\t\treturn ''\n\t\t}\n\n\t\tvar noExistFields = keys.filter((key) => {\n\t\t\treturn keys2.indexOf(key) < 0;\n\t\t})\n\t\tvar errorMessage = formatMessage({\n\t\t\tfield: JSON.stringify(noExistFields)\n\t\t}, SchemaValidator.message.TAG + SchemaValidator.message['defaultInvalid'])\n\t\treturn [{\n\t\t\tkey: 'invalid',\n\t\t\terrorMessage\n\t\t}]\n\t}\n}\n\nfunction Message() {\n\treturn {\n\t\tTAG: \"\",\n\t\tdefault: '验证错误',\n\t\tdefaultInvalid: '提交的字段{field}在数据库中并不存在',\n\t\tvalidateFunction: '验证无效',\n\t\trequired: '{label}必填',\n\t\t'enum': '{label}超出范围',\n\t\ttimestamp: '{label}格式无效',\n\t\twhitespace: '{label}不能为空',\n\t\ttypeError: '{label}类型无效',\n\t\tdate: {\n\t\t\tformat: '{label}日期{value}格式无效',\n\t\t\tparse: '{label}日期无法解析,{value}无效',\n\t\t\tinvalid: '{label}日期{value}无效'\n\t\t},\n\t\tlength: {\n\t\t\tminLength: '{label}长度不能少于{minLength}',\n\t\t\tmaxLength: '{label}长度不能超过{maxLength}',\n\t\t\trange: '{label}必须介于{minLength}和{maxLength}之间'\n\t\t},\n\t\tnumber: {\n\t\t\tminimum: '{label}不能小于{minimum}',\n\t\t\tmaximum: '{label}不能大于{maximum}',\n\t\t\texclusiveMinimum: '{label}不能小于等于{minimum}',\n\t\t\texclusiveMaximum: '{label}不能大于等于{maximum}',\n\t\t\trange: '{label}必须介于{minimum}and{maximum}之间'\n\t\t},\n\t\tpattern: {\n\t\t\tmismatch: '{label}格式不匹配'\n\t\t}\n\t};\n}\n\n\nSchemaValidator.message = new Message();\n\nexport default SchemaValidator\n"],"names":[],"mappings":"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"}